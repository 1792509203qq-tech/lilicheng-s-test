# MCP 服务器连接记录

**日期**：2025-12-30  
**项目**：在 Cursor 中配置 GitHub MCP 服务器  
**状态**：✅ 成功

---

## 📋 配置目标

在 Cursor 编辑器中配置 GitHub MCP（Model Context Protocol）服务器，以便在 AI 对话中直接使用 GitHub 相关功能。

---

## 🔧 配置步骤

### 第一步：打开 Cursor 设置

1. 打开 Cursor 编辑器
2. 点击右上角的齿轮图标（⚙️）进入 **Settings**

### 第二步：导航到 MCP 设置

1. 在设置界面中，导航到 **Features** -> **MCP**

### 第三步：添加新的 MCP 服务器

1. 点击 **+ Add New MCP Server** 按钮
2. 在弹出的窗口中填写以下信息：

| 字段 | 填写内容 |
|------|---------|
| **Name** | `GitHub` |
| **Type** | `command`（或 `stdio`） |
| **Command** | `npx` |
| **Arguments** | `-y @modelcontextprotocol/server-github` |

### 第四步：配置环境变量（关键步骤）

在添加服务器的同一个窗口中，找到 **Environment Variables** 部分：

- **Key**: `GITHUB_PERSONAL_ACCESS_TOKEN`
- **Value**: `ghp_xxxxxxxxxxxxx`（你的 GitHub Personal Access Token）

### 第五步：保存配置

确认所有信息填写无误后，点击 **Add** 或 **Save** 按钮保存配置。

---

## 📁 配置文件位置

配置文件保存在：
```
%USERPROFILE%\.cursor\mcp.json
```

**配置文件内容**：
```json
{
  "mcpServers": {
    "github": {
      "command": "npx",
      "args": [
        "-y",
        "@modelcontextprotocol/server-github"
      ],
      "env": {
        "GITHUB_PERSONAL_ACCESS_TOKEN": "ghp_your_token_here"
      }
    }
  }
}
```

---

## ✅ 验证配置

### 1. 环境检查

配置前检查了以下环境：
- ✅ Node.js 已安装
- ✅ npx 可用
- ✅ GitHub Personal Access Token 已准备

### 2. 功能测试

配置完成后，成功测试了以下功能：
- ✅ 获取 GitHub 账号信息
- ✅ 列出仓库列表
- ✅ 访问仓库内容
- ✅ 获取仓库提交记录
- ✅ 创建和更新文件

### 3. 实际使用案例

今天使用 MCP 成功完成了以下操作：
1. **列出最近更新的仓库**
   - 成功获取账号 `1792509203qq-tech` 下的仓库信息
   - 找到了最近更新的仓库：`lilicheng-s-test`

2. **访问 GitHub 仓库**
   - 成功访问了 `MRYGP/DCC2025` 仓库
   - 获取了仓库的目录结构、提交记录等信息

3. **创建文档**
   - 使用 MCP 功能在仓库中创建文档（当前文档）

---

## 🎯 配置要点

### 关键配置项

1. **使用 npx 方式**（推荐）
   - 无需安装 Docker
   - 直接使用 Node.js 环境
   - 配置简单，启动快速

2. **环境变量配置**
   - Token 必须正确配置在 `env` 字段中
   - Token 格式：`ghp_xxxxxxxxxxxxx`
   - 确保 Token 具有必要的权限（至少需要 `repo` 权限）

3. **配置文件格式**
   - JSON 格式必须正确
   - 注意缩进和引号
   - 确保所有字段都正确填写

---

## 🔍 遇到的问题及解决方案

### 问题 1：配置文件格式

**问题**：初始配置时不确定 JSON 格式是否正确

**解决方案**：
- 参考了 MCP 官方文档
- 使用标准的 JSON 格式
- 确保所有字段都正确填写

### 问题 2：Token 权限

**问题**：需要确认 Token 是否有足够权限

**解决方案**：
- 在 GitHub Settings 中检查 Token 权限
- 确保至少具有 `repo` 权限
- 如果权限不足，重新生成 Token

---

## 📚 相关资源

- [Cursor MCP 文档](https://docs.cursor.com/zh/context/mcp)
- [MCP 官方文档](https://modelcontextprotocol.io/)
- [GitHub MCP 服务器](https://github.com/modelcontextprotocol/servers/tree/main/src/github)
- [GitHub Personal Access Token 创建指南](https://github.com/settings/tokens)

---

## 💡 使用建议

1. **定期更新 Token**
   - 建议每 90 天更新一次 Token
   - 如果 Token 泄露，立即撤销并生成新 Token

2. **最小权限原则**
   - 只授予 Token 必要的权限
   - 不要使用过高的权限范围

3. **安全存储**
   - 不要将配置文件提交到公共仓库
   - 确保 `.cursor` 目录在 `.gitignore` 中
   - **重要**：不要在文档中直接暴露真实的 Token

---

## 🎉 总结

通过配置 MCP 服务器，成功实现了在 Cursor 中直接使用 GitHub 功能，大大提高了工作效率。配置过程相对简单，主要注意以下几点：

1. ✅ 使用 npx 方式配置（无需 Docker）
2. ✅ 正确配置环境变量
3. ✅ 确保 Token 有足够权限
4. ✅ 重启 Cursor 使配置生效

**配置时间**：约 10 分钟  
**配置难度**：⭐⭐☆☆☆（简单）  
**推荐指数**：⭐⭐⭐⭐⭐（强烈推荐）

---

**最后更新**：2025-12-30  
**配置状态**：✅ 运行正常
